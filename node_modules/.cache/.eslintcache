[{"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\index.js":"1","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\App.js":"2","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\router\\IndexRouter.js":"3","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\index.js":"4","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\Login\\index.js":"5","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\PermissionList\\index.js":"6","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\Home\\index.js":"7","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\AssociationList\\index.js":"8","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\NoPermission\\index.js":"9","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\RoleList\\index.js":"10","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\SideMenu\\index.js":"11","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\TopHeader\\index.js":"12","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\index.js":"13","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\App.js":"14","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\router\\IndexRouter.js":"15","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\index.js":"16","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\Login\\index.js":"17","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\NoPermission\\index.js":"18","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\AssociationList\\index.js":"19","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\RoleList\\index.js":"20","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\Home\\index.js":"21","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\PermissionList\\index.js":"22","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\TopHeader\\index.js":"23","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\SideMenu\\index.js":"24","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\UserList\\index.jsx":"25","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\UserList\\index.jsx":"26","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\user-manage\\UserForm.js":"27","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\user-manage\\UserForm.js":"28"},{"size":151,"mtime":1629535454211,"results":"29","hashOfConfig":"30"},{"size":393,"mtime":1629632591559,"results":"31","hashOfConfig":"30"},{"size":920,"mtime":1632050029633,"results":"32","hashOfConfig":"30"},{"size":2629,"mtime":1631686221351,"results":"33","hashOfConfig":"30"},{"size":6460,"mtime":1632142649879,"results":"34","hashOfConfig":"30"},{"size":6950,"mtime":1631611226854,"results":"35","hashOfConfig":"30"},{"size":667,"mtime":1631686596390,"results":"36","hashOfConfig":"30"},{"size":229,"mtime":1629513807051,"results":"37","hashOfConfig":"30"},{"size":238,"mtime":1629528970215,"results":"38","hashOfConfig":"30"},{"size":8316,"mtime":1631611172687,"results":"39","hashOfConfig":"30"},{"size":4431,"mtime":1631611253956,"results":"40","hashOfConfig":"30"},{"size":1844,"mtime":1632059397294,"results":"41","hashOfConfig":"30"},{"size":151,"mtime":1629535454211,"results":"42","hashOfConfig":"43"},{"size":393,"mtime":1629632591559,"results":"44","hashOfConfig":"43"},{"size":920,"mtime":1631686676084,"results":"45","hashOfConfig":"43"},{"size":2629,"mtime":1631686221351,"results":"46","hashOfConfig":"43"},{"size":218,"mtime":1631686242320,"results":"47","hashOfConfig":"43"},{"size":238,"mtime":1629528970215,"results":"48","hashOfConfig":"43"},{"size":229,"mtime":1629513807051,"results":"49","hashOfConfig":"43"},{"size":8316,"mtime":1631611172687,"results":"50","hashOfConfig":"43"},{"size":667,"mtime":1631686596390,"results":"51","hashOfConfig":"43"},{"size":6950,"mtime":1631611226854,"results":"52","hashOfConfig":"43"},{"size":1768,"mtime":1630114055691,"results":"53","hashOfConfig":"43"},{"size":4431,"mtime":1631611253956,"results":"54","hashOfConfig":"43"},{"size":7184,"mtime":1632018263221,"results":"55","hashOfConfig":"43"},{"size":8502,"mtime":1632058857256,"results":"56","hashOfConfig":"30"},{"size":2790,"mtime":1632015282488,"results":"57","hashOfConfig":"43"},{"size":2790,"mtime":1632015282488,"results":"58","hashOfConfig":"30"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},"a5l9w5",{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"61"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"61"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"61"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"61"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"61"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"92"},"1cd8x4z",{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"92"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"92"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"92"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"111","messages":"112","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"92"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"116","messages":"117","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"118","messages":"119","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120","usedDeprecatedRules":"61"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"92"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\index.js",[],["125","126"],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\App.js",["127"],"import './App.css';\n// import {useEffect} from 'react'\n// import axios from 'axios'\nimport IndexRouter from './router/IndexRouter'\nimport { Divider } from 'rc-menu';\n\nfunction App() {\n\n  // useEffect(() => {\n  //   axios.get(\"/association/getAllAssociationList\").then((res)=>{\n  //     console.log(res.data);\n  //   })\n  // }, [])\n\n  return (\n      <IndexRouter />\n  );\n}\n\nexport default App;\n","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\router\\IndexRouter.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\index.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\Login\\index.js",["128","129","130","131","132","133","134","135","136","137","138","139"],"import React, {useState} from 'react'\r\nimport {\r\n    Menu,\r\n    Layout,\r\n    Form,\r\n    Button,\r\n    Radio,\r\n    Select,\r\n    DatePicker,\r\n    InputNumber,\r\n    TreeSelect,\r\n    Switch,\r\n    Input,\r\n    Cascader,\r\n} from 'antd';\r\n\r\nimport {\r\n    UnlockOutlined,\r\n    UserOutlined,\r\n} from '@ant-design/icons';\r\n\r\nimport axios from \"axios\";\r\nimport qs from 'qs'\r\n\r\nimport Particles from 'react-particles-js';\r\n\r\nimport './index.css'\r\n\r\nconst {Header, Content, Footer} = Layout;\r\n\r\nexport default function Login() {\r\n\r\n    const onFinish = (values) => {\r\n        console.log(\"==1 values\", values)\r\n\r\n        // 同步后端\r\n        axios({\r\n            url: \"/user/login\",\r\n            method: 'post',\r\n            data: qs.stringify(values),\r\n            // data: `${...values}`,\r\n            // 以json格式提交\r\n            // headers: { 'Content-Type': 'application/json;charset=UTF-8' }\r\n            // 以表单方式提交\r\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        }).then(res => {\r\n            console.log(res)\r\n        }).catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"loginBackGround\">\r\n            {/*粒子效果*/}\r\n            <Particles\r\n                // 粒子效果高度为当前元素高度\r\n                height={document.documentElement.clientHeight}\r\n                // 粒子效果参数\r\n                params={\r\n                    {\r\n                        \"background\": {\r\n                            \"color\": {\r\n                                \"value\": \"navajowhite\"\r\n                            },\r\n                            \"image\": \"url('/images/rainbow_cat.gif')\",\r\n                            \"position\": \"0 15%\",\r\n                            \"repeat\": \"no-repeat\",\r\n                            \"size\": \"60%\"\r\n                        },\r\n                        \"fullScreen\": {\r\n                            \"enable\": true,\r\n                            \"zIndex\": 1\r\n                        },\r\n                        \"interactivity\": {\r\n                            \"events\": {\r\n                                \"onClick\": {\r\n                                    \"enable\": true,\r\n                                    \"mode\": \"repulse\"\r\n                                },\r\n                                \"onHover\": {\r\n                                    \"mode\": \"grab\"\r\n                                }\r\n                            },\r\n                            \"modes\": {\r\n                                \"bubble\": {\r\n                                    \"distance\": 400,\r\n                                    \"duration\": 2,\r\n                                    \"opacity\": 8,\r\n                                    \"size\": 40\r\n                                },\r\n                                \"grab\": {\r\n                                    \"distance\": 200\r\n                                }\r\n                            }\r\n                        },\r\n                        \"particles\": {\r\n                            \"color\": {\r\n                                \"value\": \"#ffffff\"\r\n                            },\r\n                            \"links\": {\r\n                                \"color\": {\r\n                                    \"value\": \"#ffffff\"\r\n                                },\r\n                                \"distance\": 150,\r\n                                \"opacity\": 0.4\r\n                            },\r\n                            \"move\": {\r\n                                \"attract\": {\r\n                                    \"rotate\": {\r\n                                        \"x\": 600,\r\n                                        \"y\": 1200\r\n                                    }\r\n                                },\r\n                                \"direction\": \"left\",\r\n                                \"enable\": true,\r\n                                \"outModes\": {\r\n                                    \"bottom\": \"out\",\r\n                                    \"left\": \"out\",\r\n                                    \"right\": \"out\",\r\n                                    \"top\": \"out\"\r\n                                },\r\n                                \"speed\": 6,\r\n                                \"straight\": true\r\n                            },\r\n                            \"opacity\": {\r\n                                \"value\": 0.5,\r\n                                \"animation\": {\r\n                                    \"speed\": 1,\r\n                                    \"minimumValue\": 0.1\r\n                                }\r\n                            },\r\n                            \"shape\": {\r\n                                \"options\": {\r\n                                    \"star\": {\r\n                                        \"sides\": 5\r\n                                    }\r\n                                },\r\n                                \"type\": \"star\"\r\n                            },\r\n                            \"size\": {\r\n                                \"random\": {\r\n                                    \"enable\": true\r\n                                },\r\n                                \"value\": {\r\n                                    \"min\": 1,\r\n                                    \"max\": 4\r\n                                },\r\n                                \"animation\": {\r\n                                    \"speed\": 40,\r\n                                    \"minimumValue\": 0.1\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            />\r\n            <div className=\"userFormContainer\">\r\n                <div className=\"loginTitle\">UACS社团管理-橘集</div>\r\n                <Form labelCol={{span: 4,}}\r\n                      onFinish={onFinish}\r\n                >\r\n                    <Form.Item name=\"userId\">\r\n                        <Input placeholder=\"请输入学号/职工号\" id=\"userId\" prefix={<UserOutlined/>}/>\r\n                    </Form.Item>\r\n                    <Form.Item name=\"password\">\r\n                        <Input placeholder=\"请输入密码\" id=\"password\" prefix={<UnlockOutlined/>}/>\r\n                    </Form.Item>\r\n                    <Form.Item style={{paddingLeft: '50%',}}>\r\n                        <Button type={\"primary\"} htmlType={\"submit\"}>登录</Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\PermissionList\\index.js",["140"],"import React, { Component } from 'react'\r\nimport { Table, Tag, Button, Modal, Popover, Switch } from 'antd'\r\nimport {\r\n    EditOutlined,\r\n    DeleteOutlined,\r\n    ExclamationCircleOutlined\r\n} from '@ant-design/icons';\r\nimport axios from 'axios'\r\n\r\n\r\nconst { confirm } = Modal\r\n\r\nexport default class PermissonList extends Component {\r\n\r\n    state = {\r\n        dataSource: [],\r\n        columns: [\r\n            {\r\n                title: 'ID',\r\n                // 通过dataIndex映射VO字段\r\n                dataIndex: 'key',\r\n                // key: 'key',\r\n                render: (key) => {\r\n                    return <b>{key}</b>\r\n                }\r\n            },\r\n            {\r\n                title: '权限名称',\r\n                dataIndex: 'title',\r\n            },\r\n            {\r\n                title: '权限路径',\r\n                dataIndex: 'routePath',\r\n                render: (routePath) => {\r\n                    return <Tag color={\"orange\"}>{routePath}</Tag>\r\n                }\r\n            },\r\n            {\r\n                title: '操作',\r\n                render: (item) => {\r\n                    return <div>\r\n                        <Popover\r\n                            style={{}}\r\n                            content={\r\n                                <div>\r\n                                    <Switch checked={item.type === \"MENU_ELEMENT\"} onClick={() => this.changeMenuState(item)}></Switch>\r\n                                </div>}\r\n                            title=\"是否在左侧菜单栏展示\"\r\n                            trigger={\r\n                                item.type === \"MENU_ELEMENT\" || item.type === \"MENU_ELEMENT_CLOSE\" ?\r\n                                    \"click\"\r\n                                    : \"\"\r\n                            }\r\n                        >\r\n                            {/* {item.type === \"MENU_ELEMENT\" &&} */}\r\n                            <Button\r\n                                shape={\"circle\"}\r\n                                icon={<EditOutlined />}\r\n                            // style={item.type === \"MENU_ELEMENT\" ? {\r\n                            //     border: \"1px solid rgb(165, 99, 13)\",\r\n                            //     color: \"rgb(165, 99, 13)\"\r\n                            // } : { border: \"1px\" }}\r\n                            // disabled={item.type === \"PAGE_ELEMENT\"}\r\n                            >\r\n                            </Button>\r\n                        </Popover>\r\n                        &nbsp;&nbsp;&nbsp;\r\n                        <Button\r\n                            shape={\"circle\"}\r\n                            icon={<DeleteOutlined />}\r\n                            danger\r\n                            onClick={() => this.confirmDelete(item)}\r\n                        >\r\n                        </Button>\r\n                    </div>\r\n                }\r\n            },\r\n        ],\r\n    }\r\n\r\n\r\n    confirmDelete = (item) => {\r\n        // const { dataSource } = this.state\r\n        // console.log(\"==11 dataSource\",this.state.dataSource);\r\n        const { dataSource } = this.state\r\n        const thisPoint = this\r\n        confirm({\r\n            title: '您确认要删除吗？',\r\n            icon: <ExclamationCircleOutlined />,\r\n            onOk() {\r\n                // console.log(\"==10 item\", item);\r\n                // 同步页面\r\n                let ds = []\r\n                // let ds = Array.from(dataSource)\r\n                if (item.grade === 1) {\r\n                    // console.log(\"==11 \", ds);\r\n                    ds = dataSource.filter(data => data.key !== item.key)\r\n                } else if (item.grade === 2) {\r\n                    // console.log(\"==12 \", ds);\r\n                    dataSource.map((firstPermission) => {\r\n                        if (firstPermission.children !== \"\") {\r\n                            firstPermission.children = firstPermission.children.filter((child) => child.key !== item.key)\r\n                            if (firstPermission.children.length === 0) {\r\n                                firstPermission.children = \"\"\r\n                            }\r\n                            ds.push(firstPermission)\r\n                            // console.log(\"==14 after push:\", ds);\r\n                        } else {\r\n                            ds.push(firstPermission)\r\n                        }\r\n\r\n                    })\r\n                }\r\n                thisPoint.setState({ dataSource: ds })\r\n                // 调用后端接口，同步后台数据库\r\n                axios.get(`/association/deletePermissionById/${item.key}`)\r\n            },\r\n            onCancel() {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    // 改变菜单项的状态。是否在左侧菜单栏展示\r\n    changeMenuState = (item) => {\r\n        console.log(\"==15 item\", item);\r\n        if (item.type === \"MENU_ELEMENT\") {\r\n            item.type = \"MENU_ELEMENT_CLOSE\"\r\n        } else if (item.type === \"MENU_ELEMENT_CLOSE\") {\r\n            item.type = \"MENU_ELEMENT\"\r\n        }\r\n        this.setState([...this.state.dataSource])\r\n\r\n        // 同步后端\r\n        axios({\r\n            url: \"/association/updatePermissionById\",\r\n            method: 'post',\r\n            data: {\r\n                permissionId: item.key,\r\n                type: item.type\r\n            },\r\n            headers: { 'Content-Type': 'application/json;charset=UTF-8' }\r\n        }).then(res => {\r\n            console.log(\"==27 res\", res);\r\n        }).catch(err => {\r\n            console.log(\"==26 err\", err);\r\n        })\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        // 获取菜单信息\r\n        axios.get(\"/association/getPermissionList\").then(res => {\r\n            const { data } = res.data // res.data还只是responseBody\r\n            // 用map\r\n            // data.map((item) => {\r\n            //     return item.children = (item.children.length === 0 ? '' : item.children)\r\n            // })\r\n            // 用foreach\r\n            data.forEach((item) => {\r\n                if (item.children.length === 0) {\r\n                    item.children = \"\"\r\n                } else {\r\n                    item.children.forEach((e) => {\r\n                        if (e.children.length === 0) {\r\n                            e.children = \"\"\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            // console.log(\"==1 \", data);\r\n            this.setState({ dataSource: data })\r\n            // console.log(\"==2 \", this.state.dataSource);\r\n        }).catch(err => {\r\n            console.log(\"获取菜单（权限）列表出错！\", err);\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Table\r\n                    dataSource={this.state.dataSource}\r\n                    columns={this.state.columns}\r\n                    pagination={{\r\n                        pageSize: 5\r\n                    }}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\Home\\index.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\AssociationList\\index.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\NoPermission\\index.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\RoleList\\index.js",["141","142","143"],"import React, { Component } from 'react'\r\nimport {\r\n    Table,\r\n    Button,\r\n    Modal,\r\n    Tree\r\n} from 'antd'\r\nimport {\r\n    UnorderedListOutlined,\r\n    DeleteOutlined,\r\n    ExclamationCircleOutlined\r\n} from '@ant-design/icons';\r\nimport axios from 'axios'\r\n\r\nconst { confirm } = Modal\r\n\r\nexport default class RoleList extends Component {\r\n\r\n    state = {\r\n        roleList: [],// 角色列表\r\n        permissionList: [],// 树形权限列表\r\n        currentRolePermissionKeys: [],// 当前角色的权限\r\n        currentRoleId: 0,// 当前角色的roleId\r\n        // 角色列表表头 及 各列组件效果\r\n        columns: [\r\n            {\r\n                title: 'ID',\r\n                dataIndex: 'roleId',\r\n                render: (roleId) => {\r\n                    return <b>{roleId}</b>\r\n                }\r\n            },\r\n            {\r\n                title: '角色名称',\r\n                dataIndex: 'roleName',\r\n            },\r\n            {\r\n                title: '操作',\r\n                render: (item) => {\r\n                    return <div>\r\n                        <Button\r\n                            shape={\"circle\"}\r\n                            icon={<UnorderedListOutlined />}\r\n                            onClick={() => {\r\n                                this.setState({ isModalVisible: true })\r\n                                this.setState({ currentRolePermissionKeys: this.mapPermissions2Keys(item.permissions) })\r\n                                this.setState({ currentRoleId: item.roleId })\r\n                            }}\r\n                        >\r\n                        </Button>\r\n                        &nbsp;&nbsp;&nbsp;\r\n                        <Button\r\n                            shape={\"circle\"}\r\n                            icon={<DeleteOutlined />}\r\n                            danger\r\n                            onClick={() => this.confirmDelete(item)}\r\n                        >\r\n                        </Button>\r\n                    </div>\r\n                }\r\n            },\r\n        ],\r\n        isModalVisible: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 获取角色列表 并 同步到state中\r\n        this.getRoleList()\r\n        // 获取权限列表 并 同步到state中\r\n        this.getPermissionList()\r\n    }\r\n\r\n\r\n    // 获取角色列表\r\n    getRoleList = () => {\r\n        axios.get(\"/association/getRoleList\").then(res => {\r\n            const roleData = res.data.data\r\n            // console.log(\"==31 roleData\", roleData);\r\n            this.setState({ roleList: roleData })\r\n        }).catch(err => {\r\n            console.log(\"获取角色列表出错！\", err);\r\n        })\r\n    }\r\n\r\n    // 获取树形权限列表\r\n    getPermissionList = () => {\r\n        axios.get(\"/association/getPermissionList\").then(res => {\r\n            const permissionData = res.data.data\r\n            this.setState({ permissionList: permissionData })\r\n        }).catch(err => {\r\n            console.log(\"获取权限列表出错！\", err);\r\n        })\r\n    }\r\n\r\n    confirmDelete = (item) => {\r\n        const { roleList } = this.state\r\n        const thisPoint = this\r\n        confirm({\r\n            title: '您确认要删除吗？',\r\n            icon: <ExclamationCircleOutlined />,\r\n            onOk() {\r\n                // 同步页面\r\n                // console.log(\"==1 dataSource\", roleList);\r\n                const newList = roleList.filter(data => data.roleId !== item.roleId)\r\n                thisPoint.setState({ roleList: newList })\r\n                // 调用后端接口，同步后台数据库\r\n                // axios.get(`/association/deleteRoleById/${item.roleId}`)\r\n            },\r\n            onCancel() {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    // 模态框 点击ok 重新为角色分配权限\r\n    handleOk = () => {\r\n        // 隐藏模态框\r\n        this.setState({ isModalVisible: false })\r\n\r\n        // 为同步后端做准备\r\n        let roleId\r\n        let permissionIds = []\r\n\r\n        // 同步前端dataSource\r\n        // console.log(\"==71 当前roleId\", this.state.currentRoleId);\r\n        // console.log(\"==71 完整的permissionList\", this.state.permissionList);\r\n        const secondPermissions = this.getSecondPermissions()\r\n        // console.log(\"==73 secondPermissions\", secondPermissions);\r\n        const dataSource = this.state.roleList\r\n        // console.log(\"==75 原先的roleList\", dataSource);\r\n        const newDataSource = dataSource.map((item) => {\r\n            // 拿到当前role（即需要修改的role）\r\n            if (item.roleId === this.state.currentRoleId) {\r\n                const currentPermissions = []\r\n                secondPermissions.map((secondPms) => {\r\n                    // 如果当前二级权限在 选中的权限 中存在，则加入数组（数组为新的权限列表）\r\n                    if (this.state.currentRolePermissionKeys.find((e) => { return e === secondPms.key })) {\r\n                        // console.log(\"==76 当前权限被选中：\", secondPms);\r\n                        permissionIds.push(secondPms.key) // 同步后端\r\n                        currentPermissions.push(secondPms)\r\n                    }\r\n                })\r\n                const newItem = { ...item, permissions: currentPermissions }\r\n                // console.log(\"==77 newItem\", newItem);\r\n\r\n                roleId = item.roleId // 同步后端\r\n\r\n                return newItem\r\n                // 若不是当前role，则原样返还\r\n            } else {\r\n                return item;\r\n            }\r\n        })\r\n        console.log(\"==75 new roleList\", newDataSource);\r\n        this.setState({ roleList: newDataSource })\r\n        // 同步后端数据库(今天先写到这里--20210829)\r\n        console.log(\"==81 roleId\", roleId);\r\n        console.log(\"==81 permissionIds\", permissionIds);\r\n        axios({\r\n            url: \"/association/reGrantPermissions2Role\",\r\n            method: 'post',\r\n            data: {\r\n                roleId: roleId,\r\n                permissionIds: permissionIds\r\n            },\r\n            headers: { 'Content-Type': 'application/json;charset=UTF-8' }\r\n        }).then(res => {\r\n            // console.log(\"==27 res\", res);\r\n        }).catch(err => {\r\n            // console.log(\"==26 err\", err);\r\n        })\r\n\r\n    }\r\n\r\n    // 模态框 点击cancel || 右上角x号 || 点击模态框以外的界面\r\n    handleCancel = () => {\r\n        this.setState({ isModalVisible: false })\r\n    }\r\n\r\n    mapPermissions2Keys = (permissions) => {\r\n        // console.log(\"==54 checkedKey\", permissions);\r\n        const checkedKeys = [];\r\n        permissions.map((permission) => {\r\n            checkedKeys.push(permission.key)\r\n        })\r\n        // console.log(\"==64 checkedKeys\",checkedKeys);\r\n        return checkedKeys\r\n    }\r\n\r\n    onCheck = (checkedKeys) => {\r\n        // console.log(\"==61 checkedKeys\", checkedKeys);\r\n        // console.log(\"==62 state.当前role的permission\", this.state.currentRolePermissionKeys);\r\n        this.setState({ currentRolePermissionKeys: checkedKeys })\r\n    }\r\n\r\n    getSecondPermissions = () => {\r\n        const secondPermissions = []\r\n\r\n        this.state.permissionList.map((firstPms) => {\r\n            // console.log(\"==74 当前一级菜单项：\",firstPms);\r\n            firstPms.children.map((secondPms) => {\r\n                return secondPermissions.push(secondPms)\r\n            })\r\n        })\r\n        return secondPermissions;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Table\r\n                    dataSource={this.state.roleList}\r\n                    columns={this.state.columns}\r\n                    rowKey={(item) => item.roleId}\r\n                >\r\n                </Table>\r\n                <Modal title=\"分配权限\"\r\n                    visible={this.state.isModalVisible}\r\n                    onOk={this.handleOk}\r\n                    onCancel={this.handleCancel}>\r\n                    <Tree\r\n                        treeData={this.state.permissionList}\r\n                        checkable={true}\r\n                        checkedKeys={this.state.currentRolePermissionKeys}\r\n                        onCheck={this.onCheck}\r\n                    // checkStrictly={true}\r\n                    />\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\SideMenu\\index.js",["144"],"import React, { Component } from 'react'\r\nimport { Layout, Menu } from 'antd';\r\nimport {\r\n    AppleFilled,\r\n    UsergroupAddOutlined,\r\n    HomeTwoTone,\r\n    TeamOutlined,\r\n    ClusterOutlined,\r\n    BarsOutlined,\r\n    CarryOutOutlined,\r\n    TableOutlined,\r\n    AuditOutlined\r\n} from '@ant-design/icons';\r\n\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nimport axios from 'axios'\r\n\r\nimport './index.css'\r\n\r\nconst { SubMenu } = Menu;\r\nconst { Sider } = Layout;\r\n\r\nconst iconList = {\r\n    \"/manage/home\": <HomeTwoTone />,\r\n    \"/manage/user\": <TeamOutlined />,\r\n    \"/manage/association\": <ClusterOutlined />,\r\n    \"/manage/association/list\": <TableOutlined />,\r\n    \"/manage/association/add\": <UsergroupAddOutlined />,\r\n    \"/manage/permission\": <CarryOutOutlined />,\r\n    \"/manage/permission/roleList\": <BarsOutlined />,\r\n    \"/manage/permission/permissionList\": <TableOutlined />,\r\n    \"/manage/review\":<AuditOutlined />\r\n}\r\n\r\nclass SideMenu extends Component {\r\n\r\n    state = {\r\n        // 菜单列表\r\n        menuList: [],\r\n        // 选中菜单项的key，可以同时选中多个，因此是数组\r\n        selectKeys: [],\r\n        // 打开菜单项的key\r\n        openKeys: []\r\n    }\r\n\r\n    componentWillMount() {\r\n        // 获取菜单信息\r\n        this.getMenuList()\r\n\r\n        // 展开默认项。刷新后仍然有效\r\n        this.showSelected()\r\n    }\r\n\r\n    // 获取菜单数据\r\n    getMenuList = () => {\r\n        axios.get(\"/association/getPermissionList\").then(res => {\r\n            const { data } = res.data\r\n            // console.log(\"==1 \", data);\r\n            this.setState({ menuList: data })\r\n        }).catch(err => {\r\n            console.log(\"获取菜单出错！\", err);\r\n        })\r\n    }\r\n\r\n    // 展开选中项并高亮。刷新后仍然有效\r\n    showSelected = () => {\r\n        // ( 刷新后 )选择默认展开项、高亮项\r\n        // props.location.pathname 取出当前页面的路径\r\n        const path = this.props.location.pathname\r\n        // console.log(\"==3\", path);\r\n        const openIndex = path.lastIndexOf(\"\\/\")\r\n        const openKeys = [path.substring(0, openIndex)]\r\n        // console.log(\"==4\", openKeys);\r\n        const selectKeys = Array(this.props.location.pathname)\r\n        // console.log(\"==5\", selectKeys);\r\n\r\n        this.setState({ openKeys })\r\n        this.setState({ selectKeys })\r\n    }\r\n\r\n    // 检查是否是菜单元素。true才在菜单栏展示\r\n    checkPageElement = (item) => {\r\n        return \"MENU_ELEMENT\" === item.type ? true : false\r\n    }\r\n\r\n    // 渲染侧边栏菜单\r\n    renderMenu = (menuList) => {\r\n        return menuList.map((item) => {\r\n            if (item.children.length > 0 && this.checkPageElement(item)) {\r\n                return <SubMenu\r\n                    key={item.routePath}\r\n                    title={item.title}\r\n                    icon={iconList[item.routePath]}\r\n                >\r\n                    {/* 递归 */}\r\n                    {this.renderMenu(item.children)}\r\n                </SubMenu>\r\n            }\r\n            return this.checkPageElement(item) &&\r\n                <Menu.Item\r\n                    key={item.routePath}\r\n                    onClick={() => {\r\n                        this.props.history.push(item.routePath)\r\n                    }}\r\n                >\r\n                    {iconList[item.routePath]}\r\n                    &nbsp;&nbsp;\r\n                    {item.title}\r\n                </Menu.Item>\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Sider style={{backgroundColor:\"orange\"}} width={200} collapsed={false}>\r\n                <div style={{ display: \"flex\", height: \"100%\", \"flexDirection\": \"column\" }}>\r\n                    <div className=\"logo\"><AppleFilled /> 橘集 <AppleFilled />\r\n                        <br />高校社团管理系统\r\n                    </div>\r\n                    <div style={{ flex: 1, \"overflow\": \"auto\" }}>\r\n                        <Menu theme=\"light\" mode=\"inline\"\r\n                            defaultSelectedKeys={this.state.selectKeys}\r\n                            defaultOpenKeys={this.state.openKeys}\r\n                            style={{ height: '100%', borderRight: 0 }}>\r\n                            {this.renderMenu(this.state.menuList)}\r\n                        </Menu>\r\n                    </div>\r\n                </div>\r\n            </Sider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(SideMenu)","D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\TopHeader\\index.js",["145","146"],"import React, {useState} from 'react'\r\nimport {\r\n    Menu,\r\n    Layout,\r\n    Dropdown,\r\n    Avatar\r\n} from 'antd';\r\nimport {\r\n    MenuFoldOutlined,\r\n    MenuUnfoldOutlined,\r\n    DownOutlined,\r\n    UserOutlined,\r\n    CloseOutlined\r\n} from '@ant-design/icons'\r\n\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nconst {Header} = Layout;\r\n\r\nfunction TopHeader(props) {\r\n\r\n// 菜单数据\r\n    const menu = (\r\n        <Menu>\r\n            <Menu.Item key={1}>\r\n                <a>超级管理员</a>\r\n            </Menu.Item>\r\n            <Menu.Item key={2} danger onClick={() => {\r\n                // 去除浏览器中的token\r\n                localStorage.removeItem(\"token\")\r\n                // 重定向到login\r\n                props.history.replace(\"/login\")\r\n            }}>\r\n                退出系统<CloseOutlined/>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    const [collapsed, setCollapsed] = useState(false)\r\n\r\n    const changeFoldState = () => {\r\n        setCollapsed(!collapsed)\r\n    }\r\n\r\n    return (\r\n        <Header className=\"site-layout-background\" style={{background: \"white\", padding: \"0px 12px\"}}>\r\n            {collapsed ?\r\n                <MenuFoldOutlined onClick={changeFoldState}/>\r\n                : <MenuUnfoldOutlined onClick={changeFoldState}/>}\r\n            &nbsp;&nbsp;&nbsp;\r\n            首页\r\n            <div style={{float: \"right\"}}>\r\n                欢迎 admin 回来~\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Dropdown overlay={menu}>\r\n                    <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\r\n                        <Avatar size={40} icon={<UserOutlined/>}/>\r\n                        <DownOutlined/>\r\n                    </a>\r\n                </Dropdown>\r\n            </div>\r\n        </Header>\r\n    )\r\n}\r\n\r\nexport default withRouter(TopHeader)\r\n\r\n","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\index.js",[],["147","148"],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\App.js",["149"],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\router\\IndexRouter.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\index.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\Login\\index.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\NoPermission\\index.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\AssociationList\\index.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\RoleList\\index.js",["150","151","152"],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\Home\\index.js",[],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\PermissionList\\index.js",["153"],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\TopHeader\\index.js",["154"],"import React, { Component } from 'react'\r\nimport {\r\n    Menu,\r\n    Layout,\r\n    Dropdown,\r\n    Avatar\r\n} from 'antd';\r\nimport {\r\n    MenuFoldOutlined,\r\n    MenuUnfoldOutlined,\r\n    DownOutlined,\r\n    UserOutlined,\r\n    CloseOutlined\r\n} from '@ant-design/icons'\r\nconst { Header } = Layout;\r\n\r\n\r\n// 菜单数据\r\nconst menu = (\r\n    <Menu>\r\n        <Menu.Item>\r\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.antgroup.com\">\r\n                超级管理员\r\n            </a>\r\n        </Menu.Item>\r\n        <Menu.Item danger><CloseOutlined />退出系统</Menu.Item>\r\n    </Menu>\r\n);\r\n\r\n\r\n\r\n\r\nexport default class TopHeader extends Component {\r\n\r\n    state = { collapsed: false }\r\n\r\n    changeFoldState = () => {\r\n        const { collapsed } = this.state\r\n        this.setState({ collapsed: !collapsed })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Header className=\"site-layout-background\" style={{ background: \"white\", padding: \"0px 12px\" }}>\r\n                {this.state.collapsed ?\r\n                    <MenuFoldOutlined onClick={this.changeFoldState} />\r\n                    : <MenuUnfoldOutlined onClick={this.changeFoldState} />}\r\n\r\n                &nbsp;&nbsp;&nbsp;\r\n\r\n                首页\r\n\r\n                <div style={{ float: \"right\" }}>\r\n                    欢迎 admin 回来~\r\n                    &nbsp;&nbsp;&nbsp;\r\n                    <Dropdown overlay={menu}>\r\n                        <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\r\n                            <Avatar size={40} icon={<UserOutlined />} /> \r\n                            <DownOutlined />\r\n                        </a>\r\n                    </Dropdown>\r\n                </div>\r\n            </Header>\r\n        )\r\n    }\r\n}\r\n\r\n","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\SideMenu\\index.js",["155"],"D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\UserList\\index.jsx",["156"],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\views\\SandBox\\UserList\\index.jsx",["157"],"import React, {useState, useEffect, useRef} from 'react'\r\nimport {\r\n    Table,\r\n    Button,\r\n    Modal,\r\n    Switch,\r\n} from 'antd'\r\n\r\nimport {\r\n    UnorderedListOutlined,\r\n    DeleteOutlined,\r\n    ExclamationCircleOutlined\r\n} from '@ant-design/icons';\r\n\r\nimport axios from 'axios'\r\nimport UserForm from '../../../components/user-manage/UserForm';\r\n\r\n\r\nconst {confirm} = Modal\r\n\r\nexport default function UserList() {\r\n\r\n    const [dataSource, setDataSource] = useState([])\r\n    const [isAddModalVisible, setIsAddModalVisible] = useState(false)\r\n\r\n    const [associationList, setAssciationList] = useState([])\r\n    const [roleList, setRoleList] = useState([])\r\n\r\n    const addFormRef = useRef(null)\r\n\r\n    // 获取社团列表\r\n    useEffect(() => {\r\n        axios.get(\"/association/getAllAssociationList\")\r\n            .then(res => {\r\n                const {data} = res.data\r\n                // console.log(\"==52 roleList\", data);\r\n                setAssciationList(data)\r\n            })\r\n            .catch(err => {\r\n                console.log(\"获取社团列表出错！\", err);\r\n            })\r\n    }, [])\r\n\r\n    // 获取角色列表\r\n    useEffect(() => {\r\n        axios.get(\"/association/getRoleList\")\r\n            .then(res => {\r\n                const {data} = res.data\r\n                // console.log(\"==52 roleList\", data);\r\n                setRoleList(data)\r\n            })\r\n            .catch(err => {\r\n                console.log(\"获取角色列表出错！\", err);\r\n            })\r\n    }, [])\r\n\r\n    // 获取用户列表\r\n    useEffect(() => {\r\n        axios.get(\"/association/getAllUsers\")\r\n            .then(res => {\r\n                const {data} = res.data\r\n                console.log(\"==51 userList\", data);\r\n                setDataSource(data)\r\n            })\r\n            .catch(err => {\r\n                console.log(\"获取用户列表出错！\", err);\r\n            })\r\n    }, [])\r\n\r\n    // 表的行列结构\r\n    const columns = [\r\n        {\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n            render: (userId) => {\r\n                return <b>{userId}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n        },\r\n        {\r\n            title: '角色',\r\n            dataIndex: 'roleList',\r\n            filters: [\r\n                ...roleList.map((role) => {\r\n                    return {\r\n                        text: role.roleName,\r\n                        value: role.roleName,\r\n                    }\r\n                })\r\n            ],\r\n            onFilter:(value,item)=>{\r\n                // console.log(\"onFilter item\",item)\r\n                let exist = false\r\n                item.roleList.map(role=>{\r\n                    // console.log(\"onFilter 中的 role\",role)\r\n                    if(role.roleName === value){\r\n                        exist = true\r\n                    }\r\n                })\r\n                return exist\r\n\r\n            },\r\n            render: (roleList, item) => {\r\n                return roleList.map((role) => {\r\n                    return (\r\n                        <div key={role.roleId}>\r\n                            {\r\n                                role.roleName === \"超级管理员\" ?\r\n                                    `${role.roleName}`\r\n                                    : `${role.roleName} OF ${role.associationName}`\r\n                            }\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n        },\r\n        {\r\n            title: '成员状态',\r\n            dataIndex: 'state',\r\n            render: ((state) => {\r\n                return <Switch\r\n                    checked={state === \"OPEN\"}\r\n                >\r\n                </Switch>\r\n            })\r\n        },\r\n        {\r\n            title: '操作',\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button\r\n                        shape={\"circle\"}\r\n                        icon={<UnorderedListOutlined/>}\r\n                        disabled={item.canDel === 0}\r\n                    >\r\n                    </Button>\r\n                    &nbsp;&nbsp;&nbsp;\r\n                    <Button\r\n                        shape={\"circle\"}\r\n                        icon={<DeleteOutlined/>}\r\n                        danger\r\n                        disabled={item.canDel === 0}\r\n                        onClick={() => confirmDelete(item)}\r\n                    >\r\n                    </Button>\r\n                </div>\r\n            }\r\n        },\r\n    ]\r\n\r\n\r\n    // 删除确认\r\n    const confirmDelete = (item) => {\r\n        // console.log(\"delete item\", item)\r\n        confirm({\r\n            title: '您确认要删除吗？',\r\n            icon: <ExclamationCircleOutlined/>,\r\n            onOk() {\r\n                // 同步页面\r\n                // console.log(\"同步前端页面\")\r\n                const newList = dataSource.filter(data => data.id !== item.id)\r\n                setDataSource(newList)\r\n                // 调用后端接口，同步后台数据库\r\n                console.log(\"同步后台数据。。。\")\r\n                axios.delete(`/association/deleteUserById/${item.userId}`)\r\n                    .then((res) => {\r\n\r\n                    })\r\n                    .catch((err) => {\r\n\r\n                    })\r\n            },\r\n            onCancel() {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    // 弹出模态框\r\n    const showAddModal = () => {\r\n        // console.log(\"==1 弹出模态框\");\r\n        setIsAddModalVisible(true)\r\n    }\r\n\r\n\r\n    // 模态框 确认 添加成员\r\n    const handelUserAddModalOk = () => {\r\n        // console.log(\"====3 确定\");\r\n        addFormRef.current.validateFields().then(value => {\r\n            setIsAddModalVisible(false)// 关闭模态框\r\n            console.log(\"==4 \", value);\r\n\r\n            // 封装表单信息\r\n            const userObj = {\r\n                userId: value.user_id,\r\n                name: value.name,\r\n                roleName: value.roleName,\r\n                associationName: value.associationName\r\n            }\r\n\r\n            // 清空表单信息\r\n            addFormRef.current.resetFields()\r\n\r\n            // 同步后端数据库\r\n            axios.post(`/association/addUser`, userObj).then((res) => {\r\n                console.log(\"==10 addUser res\", res)\r\n                if (!res.data.data) { //如果失败了，data是null（失败原因可能是：学号已经存在，数据库插入失败）\r\n                    // 同步前端  根据当前user_id获取user信息\r\n                    axios.get(`/association/getUserById/${userObj.userId}`).then(res => {\r\n                        console.log(\"==11 getUserById res\", res)\r\n                        console.log(\"==11 getUserById res.data.data\", res.data.data)\r\n                        setDataSource([...dataSource, res.data.data])\r\n                    }).catch(err => { // catch 获取用户信息失败\r\n                        console.log(\"==err3 getUserById err\", err)\r\n                    })\r\n                }\r\n            }).catch((err) => { // catch 同步后端数据失败\r\n                console.log(\"==err1 addUser err\", err)\r\n            })\r\n        }).catch(err => { // catch 表单验证失败\r\n            // setIsAddModalVisible(false)\r\n            console.log(\"==err2 \", err);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{float: \"right\"}}>\r\n                <Button type=\"primary\" // shape=\"circle\"\r\n                    onClick={showAddModal}\r\n                >\r\n                    新增成员\r\n                </Button>\r\n            </div>\r\n            <Table\r\n                dataSource={dataSource}\r\n                columns={columns}\r\n                pagination={{\r\n                    pageSize: 4\r\n                }}\r\n                rowKey={item => item.id}\r\n            />\r\n            <Modal\r\n                visible={isAddModalVisible}\r\n                title=\"创建新成员\"\r\n                okText=\"确认\"\r\n                cancelText=\"取消\"\r\n                onCancel={() => {\r\n                    setIsAddModalVisible(false)\r\n                    console.log(\"==3 取消\");\r\n                }}\r\n                onOk={handelUserAddModalOk}\r\n            >\r\n                <UserForm\r\n                    associationList={associationList}\r\n                    roleList={roleList}\r\n                    ref={addFormRef}\r\n                ></UserForm>\r\n            </Modal>\r\n        </div>\r\n    )\r\n\r\n}\r\n","D:\\WorkSpace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\user-manage\\UserForm.js",[],"D:\\workspace\\mySrc\\front\\VSCode-workspace\\uacs_ui\\src\\components\\user-manage\\UserForm.js",[],{"ruleId":"158","replacedBy":"159"},{"ruleId":"160","replacedBy":"161"},{"ruleId":"162","severity":1,"message":"163","line":5,"column":10,"nodeType":"164","messageId":"165","endLine":5,"endColumn":17},{"ruleId":"162","severity":1,"message":"166","line":1,"column":16,"nodeType":"164","messageId":"165","endLine":1,"endColumn":24},{"ruleId":"162","severity":1,"message":"167","line":3,"column":5,"nodeType":"164","messageId":"165","endLine":3,"endColumn":9},{"ruleId":"162","severity":1,"message":"168","line":7,"column":5,"nodeType":"164","messageId":"165","endLine":7,"endColumn":10},{"ruleId":"162","severity":1,"message":"169","line":8,"column":5,"nodeType":"164","messageId":"165","endLine":8,"endColumn":11},{"ruleId":"162","severity":1,"message":"170","line":9,"column":5,"nodeType":"164","messageId":"165","endLine":9,"endColumn":15},{"ruleId":"162","severity":1,"message":"171","line":10,"column":5,"nodeType":"164","messageId":"165","endLine":10,"endColumn":16},{"ruleId":"162","severity":1,"message":"172","line":11,"column":5,"nodeType":"164","messageId":"165","endLine":11,"endColumn":15},{"ruleId":"162","severity":1,"message":"173","line":12,"column":5,"nodeType":"164","messageId":"165","endLine":12,"endColumn":11},{"ruleId":"162","severity":1,"message":"174","line":14,"column":5,"nodeType":"164","messageId":"165","endLine":14,"endColumn":13},{"ruleId":"162","severity":1,"message":"175","line":29,"column":8,"nodeType":"164","messageId":"165","endLine":29,"endColumn":14},{"ruleId":"162","severity":1,"message":"176","line":29,"column":16,"nodeType":"164","messageId":"165","endLine":29,"endColumn":23},{"ruleId":"162","severity":1,"message":"177","line":29,"column":25,"nodeType":"164","messageId":"165","endLine":29,"endColumn":31},{"ruleId":"178","severity":1,"message":"179","line":100,"column":54,"nodeType":"180","messageId":"181","endLine":100,"endColumn":56},{"ruleId":"178","severity":1,"message":"179","line":135,"column":51,"nodeType":"180","messageId":"181","endLine":135,"endColumn":53},{"ruleId":"178","severity":1,"message":"179","line":183,"column":38,"nodeType":"180","messageId":"181","endLine":183,"endColumn":40},{"ruleId":"178","severity":1,"message":"179","line":199,"column":50,"nodeType":"180","messageId":"181","endLine":199,"endColumn":52},{"ruleId":"182","severity":1,"message":"183","line":72,"column":45,"nodeType":"184","messageId":"185","endLine":72,"endColumn":46,"suggestions":"186"},{"ruleId":"187","severity":1,"message":"188","line":26,"column":17,"nodeType":"189","endLine":26,"endColumn":20},{"ruleId":"187","severity":1,"message":"188","line":56,"column":21,"nodeType":"189","endLine":56,"endColumn":88},{"ruleId":"158","replacedBy":"190"},{"ruleId":"160","replacedBy":"191"},{"ruleId":"162","severity":1,"message":"163","line":5,"column":10,"nodeType":"164","messageId":"165","endLine":5,"endColumn":17},{"ruleId":"178","severity":1,"message":"179","line":135,"column":51,"nodeType":"180","messageId":"181","endLine":135,"endColumn":53},{"ruleId":"178","severity":1,"message":"179","line":183,"column":38,"nodeType":"180","messageId":"181","endLine":183,"endColumn":40},{"ruleId":"178","severity":1,"message":"179","line":199,"column":50,"nodeType":"180","messageId":"181","endLine":199,"endColumn":52},{"ruleId":"178","severity":1,"message":"179","line":100,"column":54,"nodeType":"180","messageId":"181","endLine":100,"endColumn":56},{"ruleId":"187","severity":1,"message":"188","line":57,"column":25,"nodeType":"189","endLine":57,"endColumn":92},{"ruleId":"182","severity":1,"message":"183","line":72,"column":45,"nodeType":"184","messageId":"185","endLine":72,"endColumn":46,"suggestions":"192"},{"ruleId":null,"fatal":true,"severity":2,"message":"193","line":101,"column":17},{"ruleId":"178","severity":1,"message":"179","line":97,"column":39,"nodeType":"180","messageId":"181","endLine":97,"endColumn":41},"no-native-reassign",["194"],"no-negated-in-lhs",["195"],"no-unused-vars","'Divider' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","'Menu' is defined but never used.","'Radio' is defined but never used.","'Select' is defined but never used.","'DatePicker' is defined but never used.","'InputNumber' is defined but never used.","'TreeSelect' is defined but never used.","'Switch' is defined but never used.","'Cascader' is defined but never used.","'Header' is assigned a value but never used.","'Content' is assigned a value but never used.","'Footer' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["196","197"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement",["194"],["195"],["198","199"],"Parsing error: Unexpected token, expected \",\"\n\n\u001b[0m \u001b[90m  99 |\u001b[39m                             {role\u001b[33m.\u001b[39mroleName} \u001b[33mOF\u001b[39m {role\u001b[33m.\u001b[39massociationName}\u001b[0m\n\u001b[0m \u001b[90m 100 |\u001b[39m                         \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 101 |\u001b[39m                 })\u001b[0m\n\u001b[0m \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 102 |\u001b[39m             }\u001b[0m\n\u001b[0m \u001b[90m 103 |\u001b[39m         }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 104 |\u001b[39m         {\u001b[0m","no-global-assign","no-unsafe-negation",{"messageId":"200","fix":"201","desc":"202"},{"messageId":"203","fix":"204","desc":"205"},{"messageId":"200","fix":"206","desc":"202"},{"messageId":"203","fix":"207","desc":"205"},"removeEscape",{"range":"208","text":"209"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"210","text":"211"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"212","text":"209"},{"range":"213","text":"211"},[1869,1870],"",[1869,1869],"\\",[1869,1870],[1869,1869]]