{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/switch/style\";\nimport _Switch from \"antd/es/switch\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\n\nvar _jsxFileName = \"D:\\\\WorkSpace\\\\mySrc\\\\front\\\\VSCode-workspace\\\\uacs_ui\\\\src\\\\views\\\\SandBox\\\\UserList\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { UnorderedListOutlined, DeleteOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  confirm\n} = _Modal;\nexport default function UserList() {\n  _s();\n\n  const [dataSource, setDataSource] = useState([]);\n  const [roleList, setRoleList] = useState([]); // 获取用户列表\n\n  useEffect(() => {\n    axios.get(\"/association/getAllUsers\").then(res => {\n      const {\n        data\n      } = res.data;\n      console.log(\"==51 userList\", data);\n      setDataSource(data);\n    });\n  }, []); // 获取角色列表\n\n  useEffect(() => {\n    axios.get(\"/association/getRoleList\").then(res => {\n      const {\n        data\n      } = res.data;\n      console.log(\"==52 roleList\", data);\n      setRoleList(data);\n    });\n  }, []);\n  const columns = [{\n    title: '学号',\n    dataIndex: 'userId',\n    render: userId => {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: userId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 24\n      }, this);\n    }\n  }, {\n    title: '姓名',\n    dataIndex: 'name'\n  }, {\n    title: '成员状态',\n    dataIndex: 'state',\n    render: () => {\n      return /*#__PURE__*/_jsxDEV(_Switch, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 24\n      }, this);\n    }\n  }, {\n    title: '操作',\n    render: () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(_Button, {\n          shape: \"circle\",\n          icon: /*#__PURE__*/_jsxDEV(UnorderedListOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(_Button, {\n          shape: \"circle\",\n          icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 31\n          }, this),\n          danger: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 24\n      }, this);\n    }\n  }];\n\n  const confirmDelete = item => {\n    const {\n      roleList\n    } = this.state;\n    const thisPoint = this;\n    confirm({\n      title: '您确认要删除吗？',\n      icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }, this),\n\n      onOk() {\n        // 同步页面\n        // console.log(\"==1 dataSource\", roleList);\n        const newList = roleList.filter(data => data.roleId !== item.roleId);\n        thisPoint.setState({\n          roleList: newList\n        }); // 调用后端接口，同步后台数据库\n        // axios.get(`/association/deleteRoleById/${item.roleId}`)\n      },\n\n      onCancel() {}\n\n    });\n  };\n\n  const showAddModal = () => {\n    console.log(\"==1 弹出模态框\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(_Button, {\n      type: \"primary\",\n      shape: \"circle\",\n      onClick: showAddModal,\n      children: \"\\u65B0\\u589E\\u6210\\u5458\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_Table, {\n      dataSource: dataSource,\n      columns: columns,\n      pagination: {\n        pageSize: 5\n      },\n      rowKey: item => item.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n      visible: visible,\n      title: \"Create a new collection\",\n      okText: \"Create\",\n      cancelText: \"Cancel\",\n      onCancel: onCancel,\n      onOk: () => {\n        form.validateFields().then(values => {\n          form.resetFields();\n          onCreate(values);\n        }).catch(info => {\n          console.log('Validate Failed:', info);\n        });\n      },\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        name: \"form_in_modal\",\n        initialValues: {\n          modifier: 'public'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"title\",\n          label: \"Title\",\n          rules: [{\n            required: true,\n            message: 'Please input the title of collection!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"description\",\n          label: \"Description\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            type: \"textarea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"modifier\",\n          className: \"collection-create-form_last-form-item\",\n          children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Radio, {\n              value: \"public\",\n              children: \"Public\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Radio, {\n              value: \"private\",\n              children: \"Private\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n}\n\n_s(UserList, \"oQUNXjl1DA9mCbzWV6lerF50bxw=\");\n\n_c = UserList;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"sources":["D:/WorkSpace/mySrc/front/VSCode-workspace/uacs_ui/src/views/SandBox/UserList/index.jsx"],"names":["React","useState","useEffect","UnorderedListOutlined","DeleteOutlined","ExclamationCircleOutlined","axios","confirm","UserList","dataSource","setDataSource","roleList","setRoleList","get","then","res","data","console","log","columns","title","dataIndex","render","userId","confirmDelete","item","state","thisPoint","icon","onOk","newList","filter","roleId","setState","onCancel","showAddModal","pageSize","id","visible","form","validateFields","values","resetFields","onCreate","catch","info","modifier","required","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal, Switch } from 'antd'\r\nimport {\r\n    UnorderedListOutlined,\r\n    DeleteOutlined,\r\n    ExclamationCircleOutlined\r\n} from '@ant-design/icons';\r\nimport axios from 'axios'\r\n\r\nconst { confirm } = Modal\r\n\r\nexport default function UserList() {\r\n\r\n    const [dataSource, setDataSource] = useState([])\r\n    const [roleList, setRoleList] = useState([])\r\n\r\n    // 获取用户列表\r\n    useEffect(() => {\r\n        axios.get(\"/association/getAllUsers\")\r\n            .then(res => {\r\n                const {data} = res.data\r\n                console.log(\"==51 userList\", data);\r\n                setDataSource(data)\r\n            })\r\n    }, [])\r\n\r\n    // 获取角色列表\r\n    useEffect(() => {\r\n        axios.get(\"/association/getRoleList\")\r\n            .then(res => {\r\n                const {data} = res.data\r\n                console.log(\"==52 roleList\", data);\r\n                setRoleList(data)\r\n            })\r\n    }, [])\r\n\r\n    const columns = [\r\n        {\r\n            title: '学号',\r\n            dataIndex: 'userId',\r\n            render: (userId) => {\r\n                return <b>{userId}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n        },\r\n        {\r\n            title: '成员状态',\r\n            dataIndex: 'state',\r\n            render: (() => {\r\n                return <Switch></Switch>\r\n            })\r\n        },\r\n        {\r\n            title: '操作',\r\n            render: () => {\r\n                return <div>\r\n                    <Button\r\n                        shape={\"circle\"}\r\n                        icon={<UnorderedListOutlined />}\r\n                    >\r\n                    </Button>\r\n                    &nbsp;&nbsp;&nbsp;\r\n                    <Button\r\n                        shape={\"circle\"}\r\n                        icon={<DeleteOutlined />}\r\n                        danger\r\n                    >\r\n                    </Button>\r\n                </div>\r\n            }\r\n        },\r\n    ]\r\n\r\n    const confirmDelete = (item) => {\r\n        const { roleList } = this.state\r\n        const thisPoint = this\r\n        confirm({\r\n            title: '您确认要删除吗？',\r\n            icon: <ExclamationCircleOutlined />,\r\n            onOk() {\r\n                // 同步页面\r\n                // console.log(\"==1 dataSource\", roleList);\r\n                const newList = roleList.filter(data => data.roleId !== item.roleId)\r\n                thisPoint.setState({ roleList: newList })\r\n                // 调用后端接口，同步后台数据库\r\n                // axios.get(`/association/deleteRoleById/${item.roleId}`)\r\n            },\r\n            onCancel() {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    const showAddModal = ()=>{\r\n        console.log(\"==1 弹出模态框\");\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                type=\"primary\"\r\n                shape=\"circle\"\r\n                onClick={showAddModal}\r\n            >\r\n                新增成员\r\n                </Button>\r\n            <Table\r\n                dataSource={dataSource}\r\n                columns={columns}\r\n                pagination={{\r\n                    pageSize:5\r\n                }}\r\n                rowKey={item=>item.id}\r\n            />\r\n            <Modal\r\n      visible={visible}\r\n      title=\"Create a new collection\"\r\n      okText=\"Create\"\r\n      cancelText=\"Cancel\"\r\n      onCancel={onCancel}\r\n      onOk={() => {\r\n        form\r\n          .validateFields()\r\n          .then(values => {\r\n            form.resetFields();\r\n            onCreate(values);\r\n          })\r\n          .catch(info => {\r\n            console.log('Validate Failed:', info);\r\n          });\r\n      }}\r\n    >\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        name=\"form_in_modal\"\r\n        initialValues={{ modifier: 'public' }}\r\n      >\r\n        <Form.Item\r\n          name=\"title\"\r\n          label=\"Title\"\r\n          rules={[{ required: true, message: 'Please input the title of collection!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"description\" label=\"Description\">\r\n          <Input type=\"textarea\" />\r\n        </Form.Item>\r\n        <Form.Item name=\"modifier\" className=\"collection-create-form_last-form-item\">\r\n          <Radio.Group>\r\n            <Radio value=\"public\">Public</Radio>\r\n            <Radio value=\"private\">Private</Radio>\r\n          </Radio.Group>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n        </div>\r\n    )\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}